###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.1.245/W32 for ARM         14/May/2020  16:51:01
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode             
#    Endian            =  little
#    Source file       =
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\MQXLITE\psp\cortex_m\psp_tisu.c
#    Command line      =
#        -f C:\Users\81901\AppData\Local\Temp\EW5EF8.tmp
#        (C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\MQXLITE\psp\cortex_m\psp_tisu.c
#        --preprocess=s
#        "C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\kl16z128_eslora
#        MQXLite\List" -lcN
#        "C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\kl16z128_eslora
#        MQXLite\List" -o
#        "C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\kl16z128_eslora
#        MQXLite\Obj" --no_cse --no_unroll --no_inline --no_code_motion
#        --no_tbaa --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M0+ -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.4\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\Sources\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\MQXLITE\include\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\MQXLITE\config\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\MQXLITE\psp\cortex_m\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\MQXLITE\psp\cortex_m\compiler\iar\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Generated_Code\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\PExSupport\Kinetis\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\OSAbstraction\MQXLite\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\RNG\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Common\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Utils\Lists\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Utils\FunctionLib\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Utils\SecLib\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\FSCI\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\FSCI\Source\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Panic\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\SerialManager\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\MemManager\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\TimersManager\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\TimersManager\Source\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\Messaging\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\RNG\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\framework\RNG\Source\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\ieee_802_15_4\Phy\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\ieee_802_15_4\SMAC\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\ADC\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\BME\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\Flash\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\I2C\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\LED\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\LLWU\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\LPTMR\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\SMC\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\MCG\Interface\
#        -I
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\..\drv\Portable\Reset\
#        -On)
#    Locale            =  C
#    List file         =
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\kl16z128_eslora
#        MQXLite\List\psp_tisu.lst
#    Object file       =
#        C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\app\kl16z128_eslora
#        MQXLite\Obj\psp_tisu.o
#    Runtime model:       
#      __SystemLibrary =  DLib
#      __dlib_version  =  6
#
###############################################################################

C:\Users\81901\Desktop\job\es920lr\SDK\src\Application\KL16_SMAC_MQXLite\MQXLITE\psp\cortex_m\psp_tisu.c
      1          /**HEADER********************************************************************
      2          *
      3          * Copyright (c) 2010 Freescale Semiconductor
      4          * All Rights Reserved
      5          *
      6          ***************************************************************************
      7          *
      8          * THIS SOFTWARE IS PROVIDED BY FREESCALE "AS IS" AND ANY EXPRESSED OR
      9          * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
     10          * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
     11          * IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
     12          * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
     13          * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     14          * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     15          * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
     16          * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
     17          * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
     18          * THE POSSIBILITY OF SUCH DAMAGE.
     19          *
     20          **************************************************************************
     21          *
     22          * $FileName: psp_tisu.c$
     23          * $Version : 3.7.3.0$
     24          * $Date    : Feb-7-2011$
     25          *
     26          * Comments:
     27          *   This file contains the function for subtracting two tick structs
     28          *
     29          *END************************************************************************/
     30          
     31          #include "mqx_inc.h"
     32          #if MQX_HAS_TICK
     33          
     34          /*FUNCTION*-------------------------------------------------------------------
     35           *
     36           * Function Name    : _psp_subtract_ticks
     37           * Returned Value   :
     38           * Comments         : r = a - b
     39           *
     40           *END*----------------------------------------------------------------------*/
     41          
     42          void _psp_subtract_ticks
     43             (
     44                 /* [IN] The two structures to subtract - both must be normalized */
     45                 PSP_TICK_STRUCT_PTR a_ptr,
     46                 PSP_TICK_STRUCT_PTR b_ptr,
     47          
     48                 /* [OUT] The result of the subtraction */
     49                 PSP_TICK_STRUCT_PTR r_ptr
     50             )
     51          { /* Body */
     52             register uint_32       a_hw_ticks;
     53             register uint_32       b_hw_ticks;
     54          
     55             r_ptr->TICKS[0] = a_ptr->TICKS[0] - b_ptr->TICKS[0];
     56          
     57             a_hw_ticks  = a_ptr->HW_TICKS[0];
     58             b_hw_ticks  = b_ptr->HW_TICKS[0];
     59          
     60             if ( a_hw_ticks < b_hw_ticks) {
     61                a_hw_ticks += _mqx_kernel_data->HW_TICKS_PER_TICK;
     62                r_ptr->TICKS[0]--;
     63             } /* Endif */
     64          
     65             r_ptr->HW_TICKS[0] = a_hw_ticks - b_hw_ticks;
     66          
     67          } /* Endbody */
     68          
     69          
     70          /*FUNCTION*-------------------------------------------------------------------
     71           *
     72           * Function Name    : _psp_subtract_ticks_int32
     73           * Returned Value   :
     74           * Comments         : r = a - b, clamp into range <-(MAX_INT_32 + 1), MAX_INT_32>
     75           *
     76           *END*----------------------------------------------------------------------*/
     77          
     78          int_32 _psp_subtract_ticks_int32
     79             (
     80                 /* [IN] The two structures to subtract - both must be normalized */
     81                 PSP_TICK_STRUCT_PTR a_ptr,
     82                 PSP_TICK_STRUCT_PTR b_ptr,
     83          
     84                 /* [OUT] The result of the subtraction */
     85                 boolean _PTR_       o_ptr
     86             )
     87          { /* Body */
     88             register uint_32       a_hw_ticks;
     89             register uint_32       b_hw_ticks;
     90             PSP_TICK_STRUCT        r;
     91          
     92             r.TICKS[0] = a_ptr->TICKS[0] - b_ptr->TICKS[0];
     93          
     94             a_hw_ticks  = a_ptr->HW_TICKS[0];
     95             b_hw_ticks  = b_ptr->HW_TICKS[0];
     96          
     97             if ( a_hw_ticks < b_hw_ticks)
     98             {
     99                a_hw_ticks += _mqx_kernel_data->HW_TICKS_PER_TICK;
    100                r.TICKS[0]--;
    101             } /* Endif */
    102          
    103             /* exchange sign bits between the 32bit halves of 64bit signed difference */
    104          #if PSP_ENDIAN == MQX_LITTLE_ENDIAN
    105             b_hw_ticks = ((uint_32_ptr)r.TICKS)[1];
    106          #else
    107             b_hw_ticks = ((uint_32_ptr)r.TICKS)[0];
    108          #endif
    109             a_hw_ticks = (b_hw_ticks & (MAX_UINT_32 ^ MAX_INT_32)) | (((uint_32)(r.TICKS[0])) & MAX_INT_32);
    110             b_hw_ticks = (((uint_32)(r.TICKS[0])) & (MAX_UINT_32 ^ MAX_INT_32)) | (b_hw_ticks & MAX_INT_32);
    111             if (o_ptr != NULL) *o_ptr = FALSE;
    112          
    113             /* a_hw_ticks contains 32bit signed result, b_hw_ticks must contain all zeroes or all ones according to sign */
    114             if ((a_hw_ticks >> 31) * MAX_UINT_32 != b_hw_ticks)
    115             {
    116                a_hw_ticks = MAX_INT_32 + (a_hw_ticks >> 31);
    117                if (o_ptr != NULL) *o_ptr = TRUE;
    118             }
    119          
    120             return (int_32)a_hw_ticks;
    121          
    122          } /* Endbody */
    123          #endif
    124          
    125          /* EOF */

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      20   _psp_subtract_ticks
      48   _psp_subtract_ticks_int32


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
      64  _psp_subtract_ticks
     142  _psp_subtract_ticks_int32

 
 214 bytes in section .text
 
 214 bytes of CODE memory

Errors: none
Warnings: none
